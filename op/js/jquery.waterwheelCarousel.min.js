/*!
 * Waterwheel Carousel
 * Version 2.3.0
 * http://www.bkosborne.com
 *
 * Copyright 2011-2013 Brian Osborne
 * Dual licensed under GPLv3 or MIT
 * Copies of the licenses have been distributed
 * with this plugin.
 *
 * Plugin written by Brian Osborne
 * for use with the jQuery JavaScript Framework
 * http://www.jquery.com
 */
(function(a){a.fn.waterwheelCarousel=function(r){if(this.length>1){this.each(function(){a(this).waterwheelCarousel(r)});return this}var m=this;var c={};var t={};function j(){t={itemsContainer:a(m),totalItems:a(m).find("img").length,containerWidth:a(m).width(),containerHeight:a(m).height(),currentCenterItem:null,previousCenterItem:null,items:[],calculations:[],carouselRotationsLeft:0,currentlyMoving:false,itemsAnimating:0,currentSpeed:c.speed,intervalTimer:null,currentDirection:"forward",leftItemsCount:0,rightItemsCount:0,performingSetup:true};t.itemsContainer.find("img").removeClass(c.activeClassName)}function l(u){clearTimeout(t.autoPlayTimer);if(!u&&c.autoPlay!==0){t.autoPlayTimer=setTimeout(function(){if(c.autoPlay>0){n("forward")}else{n("backward")}},Math.abs(c.autoPlay))}}function h(x){if(c.preloadImages===false){x();return}var v=t.itemsContainer.find("img"),u=0,w=v.length;v.each(function(){a(this).bind("load",function(){u+=1;if(u===w){x();return}});a(this).attr("src",a(this).attr("src"));if(this.complete){a(this).trigger("load")}})}function d(){t.itemsContainer.find("img").each(function(){if(a(this).data("original_width")==undefined||c.forcedImageWidth>0){a(this).data("original_width",a(this).width())}if(a(this).data("original_height")==undefined||c.forcedImageHeight>0){a(this).data("original_height",a(this).height())}})}function e(){if(c.forcedImageWidth&&c.forcedImageHeight){t.itemsContainer.find("img").each(function(){a(this).width(c.forcedImageWidth);a(this).height(c.forcedImageHeight)})}}function s(){var v=t.itemsContainer.find("img:first");t.calculations[0]={distance:0,offset:0,opacity:1};var u=c.horizonOffset;var x=c.separation;for(var w=1;w<=c.flankingItems+2;w++){if(w>1){u*=c.horizonOffsetMultiplier;x*=c.separationMultiplier}t.calculations[w]={distance:t.calculations[w-1].distance+x,offset:t.calculations[w-1].offset+u,opacity:t.calculations[w-1].opacity*c.opacityMultiplier}}if(c.edgeFadeEnabled){t.calculations[c.flankingItems+1].opacity=0}else{t.calculations[c.flankingItems+1]={distance:0,offset:0,opacity:0}}}function b(){t.items=t.itemsContainer.find("img");for(var u=0;u<t.totalItems;u++){t.items[u]=a(t.items[u])}if(c.horizon===0){if(c.orientation==="horizontal"){c.horizon=t.containerHeight/2}else{c.horizon=t.containerWidth/2}}t.itemsContainer.css("position","relative").find("img").each(function(){var w,v;if(c.orientation==="horizontal"){w=(t.containerWidth/2)-(a(this).data("original_width")/2);v=c.horizon-(a(this).data("original_height")/2)}else{w=c.horizon-(a(this).data("original_width")/2);v=(t.containerHeight/2)-(a(this).data("original_height")/2)}a(this).css({left:w,top:v,visibility:"visible",position:"absolute","z-index":0,opacity:0}).data({top:v,left:w,oldPosition:0,currentPosition:0,depth:0,opacity:0}).show()})}function q(){c.startingItem=(c.startingItem===0)?Math.round(t.totalItems/2):c.startingItem;t.rightItemsCount=Math.ceil((t.totalItems-1)/2);t.leftItemsCount=Math.floor((t.totalItems-1)/2);t.carouselRotationsLeft=1;k(t.items[c.startingItem-1],0);t.items[c.startingItem-1].css("opacity",1);var u=c.startingItem-1;for(var v=1;v<=t.rightItemsCount;v++){(u<t.totalItems-1)?u+=1:u=0;t.items[u].css("opacity",1);k(t.items[u],v)}var u=c.startingItem-1;for(var v=-1;v>=t.leftItemsCount*-1;v--){(u>0)?u-=1:u=t.totalItems-1;t.items[u].css("opacity",1);k(t.items[u],v)}}function f(I,y){var z=Math.abs(y);if(z<c.flankingItems+1){var x=t.calculations[z]}else{var x=t.calculations[c.flankingItems+1]}var A=Math.pow(c.sizeMultiplier,z);var C=A*I.data("original_width");var w=A*I.data("original_height");var v=Math.abs(I.width()-C);var B=Math.abs(I.height()-w);var D=x.offset;var J=x.distance;if(y<0){J*=-1}if(c.orientation=="horizontal"){var u=t.containerWidth/2;var H=u+J-(C/2);var F=c.horizon-D-(w/2)}else{var u=t.containerHeight/2;var H=c.horizon-D-(C/2);var F=u+J-(w/2)}var E;if(y===0){E=1}else{E=x.opacity}var G=c.flankingItems+2-z;I.data("width",C);I.data("height",w);I.data("top",F);I.data("left",H);I.data("oldPosition",I.data("currentPosition"));I.data("depth",G);I.data("opacity",E)}function k(u,v){if(Math.abs(v)<=c.flankingItems+1){f(u,v);t.itemsAnimating++;u.css("z-index",u.data().depth).animate({left:u.data().left,width:u.data().width,height:u.data().height,top:u.data().top,opacity:u.data().opacity},t.currentSpeed,c.animationEasing,function(){g(u,v)})}else{u.data("currentPosition",v);if(u.data("oldPosition")===0){u.css({left:u.data().left,width:u.data().width,height:u.data().height,top:u.data().top,opacity:u.data().opacity,"z-index":u.data().depth})}}}function g(u,v){t.itemsAnimating--;u.data("currentPosition",v);if(v===0){t.currentCenterItem=u}if(t.itemsAnimating===0){t.carouselRotationsLeft-=1;t.currentlyMoving=false;if(t.carouselRotationsLeft>0){p(0)}else{t.currentSpeed=c.speed;t.currentCenterItem.addClass(c.activeClassName);if(t.performingSetup===false){c.movedToCenter(t.currentCenterItem);c.movedFromCenter(t.previousCenterItem)}t.performingSetup=false;l()}}}function p(v){if(t.currentlyMoving===false){t.currentCenterItem.removeClass(c.activeClassName);t.currentlyMoving=true;t.itemsAnimating=0;t.carouselRotationsLeft+=v;if(c.quickerForFurther===true){if(v>1){t.currentSpeed=c.speed/v}t.currentSpeed=(t.currentSpeed<100)?100:t.currentSpeed}for(var y=0;y<t.totalItems;y++){var w=a(t.items[y]);var z=w.data("currentPosition");var x;if(t.currentDirection=="forward"){x=z-1}else{x=z+1}var u=(x>0)?t.rightItemsCount:t.leftItemsCount;if(Math.abs(x)>u){x=z*-1;if(t.totalItems%2==0){x+=1}}k(w,x)}}}a(this).find("img").bind("click",function(){var v=a(this).data().currentPosition;if(c.imageNav==false){return}if(Math.abs(v)>=c.flankingItems+1){return}if(t.currentlyMoving){return}t.previousCenterItem=t.currentCenterItem;l(true);c.autoPlay=0;var u=Math.abs(v);if(v==0){c.clickedCenter(a(this))}else{c.movingFromCenter(t.currentCenterItem);c.movingToCenter(a(this));if(v<0){t.currentDirection="backward";p(u)}else{if(v>0){t.currentDirection="forward";p(u)}}}});a(this).find("a").bind("click",function(u){var v=a(this).find("img").data("currentPosition")==0;if(c.linkHandling===1||(c.linkHandling===2&&!v)){u.preventDefault();return false}});function o(){var u=t.currentCenterItem.next();if(u.length<=0){u=t.currentCenterItem.parent().children().first()}return u}function i(){var u=t.currentCenterItem.prev();if(u.length<=0){u=t.currentCenterItem.parent().children().last()}return u}function n(u){if(t.currentlyMoving===false){t.previousCenterItem=t.currentCenterItem;c.movingFromCenter(t.currentCenterItem);if(u=="backward"){c.movingToCenter(i());t.currentDirection="backward"}else{if(u=="forward"){c.movingToCenter(o());t.currentDirection="forward"}}}p(1)}a(document).keydown(function(u){if(c.keyboardNav){if((u.which===37&&c.orientation=="horizontal")||(u.which===38&&c.orientation=="vertical")){l(true);c.autoPlay=0;n("backward")}else{if((u.which===39&&c.orientation=="horizontal")||(u.which===40&&c.orientation=="vertical")){l(true);c.autoPlay=0;n("forward")}}if(c.keyboardNavOverride&&((c.orientation=="horizontal"&&(u.which===37||u.which===39))||(c.orientation=="vertical"&&(u.which===38||u.which===40)))){u.preventDefault();return false}}});this.reload=function(v){if(typeof v==="object"){var u=v}else{var u={}}c=a.extend({},a.fn.waterwheelCarousel.defaults,v);j();t.itemsContainer.find("img").hide();e();h(function(){d();s();b();q()})};this.next=function(){l(true);c.autoPlay=0;n("forward")};this.prev=function(){l(true);c.autoPlay=0;n("backward")};this.reload(r);return this};a.fn.waterwheelCarousel.defaults={startingItem:1,separation:175,separationMultiplier:0.6,horizonOffset:0,horizonOffsetMultiplier:1,sizeMultiplier:0.7,opacityMultiplier:0.8,horizon:0,flankingItems:3,speed:300,animationEasing:"linear",quickerForFurther:true,edgeFadeEnabled:false,linkHandling:2,autoPlay:0,orientation:"horizontal",activeClassName:"carousel-center",keyboardNav:false,keyboardNavOverride:true,imageNav:true,preloadImages:true,forcedImageWidth:0,forcedImageHeight:0,movingToCenter:a.noop,movedToCenter:a.noop,clickedCenter:a.noop,movingFromCenter:a.noop,movedFromCenter:a.noop}})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkud2F0ZXJ3aGVlbENhcm91c2VsLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIFdhdGVyd2hlZWwgQ2Fyb3VzZWxcbiAqIFZlcnNpb24gMi4zLjBcbiAqIGh0dHA6Ly93d3cuYmtvc2Jvcm5lLmNvbVxuICpcbiAqIENvcHlyaWdodCAyMDExLTIwMTMgQnJpYW4gT3Nib3JuZVxuICogRHVhbCBsaWNlbnNlZCB1bmRlciBHUEx2MyBvciBNSVRcbiAqIENvcGllcyBvZiB0aGUgbGljZW5zZXMgaGF2ZSBiZWVuIGRpc3RyaWJ1dGVkXG4gKiB3aXRoIHRoaXMgcGx1Z2luLlxuICpcbiAqIFBsdWdpbiB3cml0dGVuIGJ5IEJyaWFuIE9zYm9ybmVcbiAqIGZvciB1c2Ugd2l0aCB0aGUgalF1ZXJ5IEphdmFTY3JpcHQgRnJhbWV3b3JrXG4gKiBodHRwOi8vd3d3LmpxdWVyeS5jb21cbiAqL1xuKGZ1bmN0aW9uKGEpe2EuZm4ud2F0ZXJ3aGVlbENhcm91c2VsPWZ1bmN0aW9uKHIpe2lmKHRoaXMubGVuZ3RoPjEpe3RoaXMuZWFjaChmdW5jdGlvbigpe2EodGhpcykud2F0ZXJ3aGVlbENhcm91c2VsKHIpfSk7cmV0dXJuIHRoaXN9dmFyIG09dGhpczt2YXIgYz17fTt2YXIgdD17fTtmdW5jdGlvbiBqKCl7dD17aXRlbXNDb250YWluZXI6YShtKSx0b3RhbEl0ZW1zOmEobSkuZmluZChcImltZ1wiKS5sZW5ndGgsY29udGFpbmVyV2lkdGg6YShtKS53aWR0aCgpLGNvbnRhaW5lckhlaWdodDphKG0pLmhlaWdodCgpLGN1cnJlbnRDZW50ZXJJdGVtOm51bGwscHJldmlvdXNDZW50ZXJJdGVtOm51bGwsaXRlbXM6W10sY2FsY3VsYXRpb25zOltdLGNhcm91c2VsUm90YXRpb25zTGVmdDowLGN1cnJlbnRseU1vdmluZzpmYWxzZSxpdGVtc0FuaW1hdGluZzowLGN1cnJlbnRTcGVlZDpjLnNwZWVkLGludGVydmFsVGltZXI6bnVsbCxjdXJyZW50RGlyZWN0aW9uOlwiZm9yd2FyZFwiLGxlZnRJdGVtc0NvdW50OjAscmlnaHRJdGVtc0NvdW50OjAscGVyZm9ybWluZ1NldHVwOnRydWV9O3QuaXRlbXNDb250YWluZXIuZmluZChcImltZ1wiKS5yZW1vdmVDbGFzcyhjLmFjdGl2ZUNsYXNzTmFtZSl9ZnVuY3Rpb24gbCh1KXtjbGVhclRpbWVvdXQodC5hdXRvUGxheVRpbWVyKTtpZighdSYmYy5hdXRvUGxheSE9PTApe3QuYXV0b1BsYXlUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoYy5hdXRvUGxheT4wKXtuKFwiZm9yd2FyZFwiKX1lbHNle24oXCJiYWNrd2FyZFwiKX19LE1hdGguYWJzKGMuYXV0b1BsYXkpKX19ZnVuY3Rpb24gaCh4KXtpZihjLnByZWxvYWRJbWFnZXM9PT1mYWxzZSl7eCgpO3JldHVybn12YXIgdj10Lml0ZW1zQ29udGFpbmVyLmZpbmQoXCJpbWdcIiksdT0wLHc9di5sZW5ndGg7di5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5iaW5kKFwibG9hZFwiLGZ1bmN0aW9uKCl7dSs9MTtpZih1PT09dyl7eCgpO3JldHVybn19KTthKHRoaXMpLmF0dHIoXCJzcmNcIixhKHRoaXMpLmF0dHIoXCJzcmNcIikpO2lmKHRoaXMuY29tcGxldGUpe2EodGhpcykudHJpZ2dlcihcImxvYWRcIil9fSl9ZnVuY3Rpb24gZCgpe3QuaXRlbXNDb250YWluZXIuZmluZChcImltZ1wiKS5lYWNoKGZ1bmN0aW9uKCl7aWYoYSh0aGlzKS5kYXRhKFwib3JpZ2luYWxfd2lkdGhcIik9PXVuZGVmaW5lZHx8Yy5mb3JjZWRJbWFnZVdpZHRoPjApe2EodGhpcykuZGF0YShcIm9yaWdpbmFsX3dpZHRoXCIsYSh0aGlzKS53aWR0aCgpKX1pZihhKHRoaXMpLmRhdGEoXCJvcmlnaW5hbF9oZWlnaHRcIik9PXVuZGVmaW5lZHx8Yy5mb3JjZWRJbWFnZUhlaWdodD4wKXthKHRoaXMpLmRhdGEoXCJvcmlnaW5hbF9oZWlnaHRcIixhKHRoaXMpLmhlaWdodCgpKX19KX1mdW5jdGlvbiBlKCl7aWYoYy5mb3JjZWRJbWFnZVdpZHRoJiZjLmZvcmNlZEltYWdlSGVpZ2h0KXt0Lml0ZW1zQ29udGFpbmVyLmZpbmQoXCJpbWdcIikuZWFjaChmdW5jdGlvbigpe2EodGhpcykud2lkdGgoYy5mb3JjZWRJbWFnZVdpZHRoKTthKHRoaXMpLmhlaWdodChjLmZvcmNlZEltYWdlSGVpZ2h0KX0pfX1mdW5jdGlvbiBzKCl7dmFyIHY9dC5pdGVtc0NvbnRhaW5lci5maW5kKFwiaW1nOmZpcnN0XCIpO3QuY2FsY3VsYXRpb25zWzBdPXtkaXN0YW5jZTowLG9mZnNldDowLG9wYWNpdHk6MX07dmFyIHU9Yy5ob3Jpem9uT2Zmc2V0O3ZhciB4PWMuc2VwYXJhdGlvbjtmb3IodmFyIHc9MTt3PD1jLmZsYW5raW5nSXRlbXMrMjt3Kyspe2lmKHc+MSl7dSo9Yy5ob3Jpem9uT2Zmc2V0TXVsdGlwbGllcjt4Kj1jLnNlcGFyYXRpb25NdWx0aXBsaWVyfXQuY2FsY3VsYXRpb25zW3ddPXtkaXN0YW5jZTp0LmNhbGN1bGF0aW9uc1t3LTFdLmRpc3RhbmNlK3gsb2Zmc2V0OnQuY2FsY3VsYXRpb25zW3ctMV0ub2Zmc2V0K3Usb3BhY2l0eTp0LmNhbGN1bGF0aW9uc1t3LTFdLm9wYWNpdHkqYy5vcGFjaXR5TXVsdGlwbGllcn19aWYoYy5lZGdlRmFkZUVuYWJsZWQpe3QuY2FsY3VsYXRpb25zW2MuZmxhbmtpbmdJdGVtcysxXS5vcGFjaXR5PTB9ZWxzZXt0LmNhbGN1bGF0aW9uc1tjLmZsYW5raW5nSXRlbXMrMV09e2Rpc3RhbmNlOjAsb2Zmc2V0OjAsb3BhY2l0eTowfX19ZnVuY3Rpb24gYigpe3QuaXRlbXM9dC5pdGVtc0NvbnRhaW5lci5maW5kKFwiaW1nXCIpO2Zvcih2YXIgdT0wO3U8dC50b3RhbEl0ZW1zO3UrKyl7dC5pdGVtc1t1XT1hKHQuaXRlbXNbdV0pfWlmKGMuaG9yaXpvbj09PTApe2lmKGMub3JpZW50YXRpb249PT1cImhvcml6b250YWxcIil7Yy5ob3Jpem9uPXQuY29udGFpbmVySGVpZ2h0LzJ9ZWxzZXtjLmhvcml6b249dC5jb250YWluZXJXaWR0aC8yfX10Lml0ZW1zQ29udGFpbmVyLmNzcyhcInBvc2l0aW9uXCIsXCJyZWxhdGl2ZVwiKS5maW5kKFwiaW1nXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgdyx2O2lmKGMub3JpZW50YXRpb249PT1cImhvcml6b250YWxcIil7dz0odC5jb250YWluZXJXaWR0aC8yKS0oYSh0aGlzKS5kYXRhKFwib3JpZ2luYWxfd2lkdGhcIikvMik7dj1jLmhvcml6b24tKGEodGhpcykuZGF0YShcIm9yaWdpbmFsX2hlaWdodFwiKS8yKX1lbHNle3c9Yy5ob3Jpem9uLShhKHRoaXMpLmRhdGEoXCJvcmlnaW5hbF93aWR0aFwiKS8yKTt2PSh0LmNvbnRhaW5lckhlaWdodC8yKS0oYSh0aGlzKS5kYXRhKFwib3JpZ2luYWxfaGVpZ2h0XCIpLzIpfWEodGhpcykuY3NzKHtsZWZ0OncsdG9wOnYsdmlzaWJpbGl0eTpcInZpc2libGVcIixwb3NpdGlvbjpcImFic29sdXRlXCIsXCJ6LWluZGV4XCI6MCxvcGFjaXR5OjB9KS5kYXRhKHt0b3A6dixsZWZ0Oncsb2xkUG9zaXRpb246MCxjdXJyZW50UG9zaXRpb246MCxkZXB0aDowLG9wYWNpdHk6MH0pLnNob3coKX0pfWZ1bmN0aW9uIHEoKXtjLnN0YXJ0aW5nSXRlbT0oYy5zdGFydGluZ0l0ZW09PT0wKT9NYXRoLnJvdW5kKHQudG90YWxJdGVtcy8yKTpjLnN0YXJ0aW5nSXRlbTt0LnJpZ2h0SXRlbXNDb3VudD1NYXRoLmNlaWwoKHQudG90YWxJdGVtcy0xKS8yKTt0LmxlZnRJdGVtc0NvdW50PU1hdGguZmxvb3IoKHQudG90YWxJdGVtcy0xKS8yKTt0LmNhcm91c2VsUm90YXRpb25zTGVmdD0xO2sodC5pdGVtc1tjLnN0YXJ0aW5nSXRlbS0xXSwwKTt0Lml0ZW1zW2Muc3RhcnRpbmdJdGVtLTFdLmNzcyhcIm9wYWNpdHlcIiwxKTt2YXIgdT1jLnN0YXJ0aW5nSXRlbS0xO2Zvcih2YXIgdj0xO3Y8PXQucmlnaHRJdGVtc0NvdW50O3YrKyl7KHU8dC50b3RhbEl0ZW1zLTEpP3UrPTE6dT0wO3QuaXRlbXNbdV0uY3NzKFwib3BhY2l0eVwiLDEpO2sodC5pdGVtc1t1XSx2KX12YXIgdT1jLnN0YXJ0aW5nSXRlbS0xO2Zvcih2YXIgdj0tMTt2Pj10LmxlZnRJdGVtc0NvdW50Ki0xO3YtLSl7KHU+MCk/dS09MTp1PXQudG90YWxJdGVtcy0xO3QuaXRlbXNbdV0uY3NzKFwib3BhY2l0eVwiLDEpO2sodC5pdGVtc1t1XSx2KX19ZnVuY3Rpb24gZihJLHkpe3ZhciB6PU1hdGguYWJzKHkpO2lmKHo8Yy5mbGFua2luZ0l0ZW1zKzEpe3ZhciB4PXQuY2FsY3VsYXRpb25zW3pdfWVsc2V7dmFyIHg9dC5jYWxjdWxhdGlvbnNbYy5mbGFua2luZ0l0ZW1zKzFdfXZhciBBPU1hdGgucG93KGMuc2l6ZU11bHRpcGxpZXIseik7dmFyIEM9QSpJLmRhdGEoXCJvcmlnaW5hbF93aWR0aFwiKTt2YXIgdz1BKkkuZGF0YShcIm9yaWdpbmFsX2hlaWdodFwiKTt2YXIgdj1NYXRoLmFicyhJLndpZHRoKCktQyk7dmFyIEI9TWF0aC5hYnMoSS5oZWlnaHQoKS13KTt2YXIgRD14Lm9mZnNldDt2YXIgSj14LmRpc3RhbmNlO2lmKHk8MCl7Sio9LTF9aWYoYy5vcmllbnRhdGlvbj09XCJob3Jpem9udGFsXCIpe3ZhciB1PXQuY29udGFpbmVyV2lkdGgvMjt2YXIgSD11K0otKEMvMik7dmFyIEY9Yy5ob3Jpem9uLUQtKHcvMil9ZWxzZXt2YXIgdT10LmNvbnRhaW5lckhlaWdodC8yO3ZhciBIPWMuaG9yaXpvbi1ELShDLzIpO3ZhciBGPXUrSi0ody8yKX12YXIgRTtpZih5PT09MCl7RT0xfWVsc2V7RT14Lm9wYWNpdHl9dmFyIEc9Yy5mbGFua2luZ0l0ZW1zKzItejtJLmRhdGEoXCJ3aWR0aFwiLEMpO0kuZGF0YShcImhlaWdodFwiLHcpO0kuZGF0YShcInRvcFwiLEYpO0kuZGF0YShcImxlZnRcIixIKTtJLmRhdGEoXCJvbGRQb3NpdGlvblwiLEkuZGF0YShcImN1cnJlbnRQb3NpdGlvblwiKSk7SS5kYXRhKFwiZGVwdGhcIixHKTtJLmRhdGEoXCJvcGFjaXR5XCIsRSl9ZnVuY3Rpb24gayh1LHYpe2lmKE1hdGguYWJzKHYpPD1jLmZsYW5raW5nSXRlbXMrMSl7Zih1LHYpO3QuaXRlbXNBbmltYXRpbmcrKzt1LmNzcyhcInotaW5kZXhcIix1LmRhdGEoKS5kZXB0aCkuYW5pbWF0ZSh7bGVmdDp1LmRhdGEoKS5sZWZ0LHdpZHRoOnUuZGF0YSgpLndpZHRoLGhlaWdodDp1LmRhdGEoKS5oZWlnaHQsdG9wOnUuZGF0YSgpLnRvcCxvcGFjaXR5OnUuZGF0YSgpLm9wYWNpdHl9LHQuY3VycmVudFNwZWVkLGMuYW5pbWF0aW9uRWFzaW5nLGZ1bmN0aW9uKCl7Zyh1LHYpfSl9ZWxzZXt1LmRhdGEoXCJjdXJyZW50UG9zaXRpb25cIix2KTtpZih1LmRhdGEoXCJvbGRQb3NpdGlvblwiKT09PTApe3UuY3NzKHtsZWZ0OnUuZGF0YSgpLmxlZnQsd2lkdGg6dS5kYXRhKCkud2lkdGgsaGVpZ2h0OnUuZGF0YSgpLmhlaWdodCx0b3A6dS5kYXRhKCkudG9wLG9wYWNpdHk6dS5kYXRhKCkub3BhY2l0eSxcInotaW5kZXhcIjp1LmRhdGEoKS5kZXB0aH0pfX19ZnVuY3Rpb24gZyh1LHYpe3QuaXRlbXNBbmltYXRpbmctLTt1LmRhdGEoXCJjdXJyZW50UG9zaXRpb25cIix2KTtpZih2PT09MCl7dC5jdXJyZW50Q2VudGVySXRlbT11fWlmKHQuaXRlbXNBbmltYXRpbmc9PT0wKXt0LmNhcm91c2VsUm90YXRpb25zTGVmdC09MTt0LmN1cnJlbnRseU1vdmluZz1mYWxzZTtpZih0LmNhcm91c2VsUm90YXRpb25zTGVmdD4wKXtwKDApfWVsc2V7dC5jdXJyZW50U3BlZWQ9Yy5zcGVlZDt0LmN1cnJlbnRDZW50ZXJJdGVtLmFkZENsYXNzKGMuYWN0aXZlQ2xhc3NOYW1lKTtpZih0LnBlcmZvcm1pbmdTZXR1cD09PWZhbHNlKXtjLm1vdmVkVG9DZW50ZXIodC5jdXJyZW50Q2VudGVySXRlbSk7Yy5tb3ZlZEZyb21DZW50ZXIodC5wcmV2aW91c0NlbnRlckl0ZW0pfXQucGVyZm9ybWluZ1NldHVwPWZhbHNlO2woKX19fWZ1bmN0aW9uIHAodil7aWYodC5jdXJyZW50bHlNb3Zpbmc9PT1mYWxzZSl7dC5jdXJyZW50Q2VudGVySXRlbS5yZW1vdmVDbGFzcyhjLmFjdGl2ZUNsYXNzTmFtZSk7dC5jdXJyZW50bHlNb3Zpbmc9dHJ1ZTt0Lml0ZW1zQW5pbWF0aW5nPTA7dC5jYXJvdXNlbFJvdGF0aW9uc0xlZnQrPXY7aWYoYy5xdWlja2VyRm9yRnVydGhlcj09PXRydWUpe2lmKHY+MSl7dC5jdXJyZW50U3BlZWQ9Yy5zcGVlZC92fXQuY3VycmVudFNwZWVkPSh0LmN1cnJlbnRTcGVlZDwxMDApPzEwMDp0LmN1cnJlbnRTcGVlZH1mb3IodmFyIHk9MDt5PHQudG90YWxJdGVtczt5Kyspe3ZhciB3PWEodC5pdGVtc1t5XSk7dmFyIHo9dy5kYXRhKFwiY3VycmVudFBvc2l0aW9uXCIpO3ZhciB4O2lmKHQuY3VycmVudERpcmVjdGlvbj09XCJmb3J3YXJkXCIpe3g9ei0xfWVsc2V7eD16KzF9dmFyIHU9KHg+MCk/dC5yaWdodEl0ZW1zQ291bnQ6dC5sZWZ0SXRlbXNDb3VudDtpZihNYXRoLmFicyh4KT51KXt4PXoqLTE7aWYodC50b3RhbEl0ZW1zJTI9PTApe3grPTF9fWsodyx4KX19fWEodGhpcykuZmluZChcImltZ1wiKS5iaW5kKFwiY2xpY2tcIixmdW5jdGlvbigpe3ZhciB2PWEodGhpcykuZGF0YSgpLmN1cnJlbnRQb3NpdGlvbjtpZihjLmltYWdlTmF2PT1mYWxzZSl7cmV0dXJufWlmKE1hdGguYWJzKHYpPj1jLmZsYW5raW5nSXRlbXMrMSl7cmV0dXJufWlmKHQuY3VycmVudGx5TW92aW5nKXtyZXR1cm59dC5wcmV2aW91c0NlbnRlckl0ZW09dC5jdXJyZW50Q2VudGVySXRlbTtsKHRydWUpO2MuYXV0b1BsYXk9MDt2YXIgdT1NYXRoLmFicyh2KTtpZih2PT0wKXtjLmNsaWNrZWRDZW50ZXIoYSh0aGlzKSl9ZWxzZXtjLm1vdmluZ0Zyb21DZW50ZXIodC5jdXJyZW50Q2VudGVySXRlbSk7Yy5tb3ZpbmdUb0NlbnRlcihhKHRoaXMpKTtpZih2PDApe3QuY3VycmVudERpcmVjdGlvbj1cImJhY2t3YXJkXCI7cCh1KX1lbHNle2lmKHY+MCl7dC5jdXJyZW50RGlyZWN0aW9uPVwiZm9yd2FyZFwiO3AodSl9fX19KTthKHRoaXMpLmZpbmQoXCJhXCIpLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKHUpe3ZhciB2PWEodGhpcykuZmluZChcImltZ1wiKS5kYXRhKFwiY3VycmVudFBvc2l0aW9uXCIpPT0wO2lmKGMubGlua0hhbmRsaW5nPT09MXx8KGMubGlua0hhbmRsaW5nPT09MiYmIXYpKXt1LnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIGZhbHNlfX0pO2Z1bmN0aW9uIG8oKXt2YXIgdT10LmN1cnJlbnRDZW50ZXJJdGVtLm5leHQoKTtpZih1Lmxlbmd0aDw9MCl7dT10LmN1cnJlbnRDZW50ZXJJdGVtLnBhcmVudCgpLmNoaWxkcmVuKCkuZmlyc3QoKX1yZXR1cm4gdX1mdW5jdGlvbiBpKCl7dmFyIHU9dC5jdXJyZW50Q2VudGVySXRlbS5wcmV2KCk7aWYodS5sZW5ndGg8PTApe3U9dC5jdXJyZW50Q2VudGVySXRlbS5wYXJlbnQoKS5jaGlsZHJlbigpLmxhc3QoKX1yZXR1cm4gdX1mdW5jdGlvbiBuKHUpe2lmKHQuY3VycmVudGx5TW92aW5nPT09ZmFsc2Upe3QucHJldmlvdXNDZW50ZXJJdGVtPXQuY3VycmVudENlbnRlckl0ZW07Yy5tb3ZpbmdGcm9tQ2VudGVyKHQuY3VycmVudENlbnRlckl0ZW0pO2lmKHU9PVwiYmFja3dhcmRcIil7Yy5tb3ZpbmdUb0NlbnRlcihpKCkpO3QuY3VycmVudERpcmVjdGlvbj1cImJhY2t3YXJkXCJ9ZWxzZXtpZih1PT1cImZvcndhcmRcIil7Yy5tb3ZpbmdUb0NlbnRlcihvKCkpO3QuY3VycmVudERpcmVjdGlvbj1cImZvcndhcmRcIn19fXAoMSl9YShkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbih1KXtpZihjLmtleWJvYXJkTmF2KXtpZigodS53aGljaD09PTM3JiZjLm9yaWVudGF0aW9uPT1cImhvcml6b250YWxcIil8fCh1LndoaWNoPT09MzgmJmMub3JpZW50YXRpb249PVwidmVydGljYWxcIikpe2wodHJ1ZSk7Yy5hdXRvUGxheT0wO24oXCJiYWNrd2FyZFwiKX1lbHNle2lmKCh1LndoaWNoPT09MzkmJmMub3JpZW50YXRpb249PVwiaG9yaXpvbnRhbFwiKXx8KHUud2hpY2g9PT00MCYmYy5vcmllbnRhdGlvbj09XCJ2ZXJ0aWNhbFwiKSl7bCh0cnVlKTtjLmF1dG9QbGF5PTA7bihcImZvcndhcmRcIil9fWlmKGMua2V5Ym9hcmROYXZPdmVycmlkZSYmKChjLm9yaWVudGF0aW9uPT1cImhvcml6b250YWxcIiYmKHUud2hpY2g9PT0zN3x8dS53aGljaD09PTM5KSl8fChjLm9yaWVudGF0aW9uPT1cInZlcnRpY2FsXCImJih1LndoaWNoPT09Mzh8fHUud2hpY2g9PT00MCkpKSl7dS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBmYWxzZX19fSk7dGhpcy5yZWxvYWQ9ZnVuY3Rpb24odil7aWYodHlwZW9mIHY9PT1cIm9iamVjdFwiKXt2YXIgdT12fWVsc2V7dmFyIHU9e319Yz1hLmV4dGVuZCh7fSxhLmZuLndhdGVyd2hlZWxDYXJvdXNlbC5kZWZhdWx0cyx2KTtqKCk7dC5pdGVtc0NvbnRhaW5lci5maW5kKFwiaW1nXCIpLmhpZGUoKTtlKCk7aChmdW5jdGlvbigpe2QoKTtzKCk7YigpO3EoKX0pfTt0aGlzLm5leHQ9ZnVuY3Rpb24oKXtsKHRydWUpO2MuYXV0b1BsYXk9MDtuKFwiZm9yd2FyZFwiKX07dGhpcy5wcmV2PWZ1bmN0aW9uKCl7bCh0cnVlKTtjLmF1dG9QbGF5PTA7bihcImJhY2t3YXJkXCIpfTt0aGlzLnJlbG9hZChyKTtyZXR1cm4gdGhpc307YS5mbi53YXRlcndoZWVsQ2Fyb3VzZWwuZGVmYXVsdHM9e3N0YXJ0aW5nSXRlbToxLHNlcGFyYXRpb246MTc1LHNlcGFyYXRpb25NdWx0aXBsaWVyOjAuNixob3Jpem9uT2Zmc2V0OjAsaG9yaXpvbk9mZnNldE11bHRpcGxpZXI6MSxzaXplTXVsdGlwbGllcjowLjcsb3BhY2l0eU11bHRpcGxpZXI6MC44LGhvcml6b246MCxmbGFua2luZ0l0ZW1zOjMsc3BlZWQ6MzAwLGFuaW1hdGlvbkVhc2luZzpcImxpbmVhclwiLHF1aWNrZXJGb3JGdXJ0aGVyOnRydWUsZWRnZUZhZGVFbmFibGVkOmZhbHNlLGxpbmtIYW5kbGluZzoyLGF1dG9QbGF5OjAsb3JpZW50YXRpb246XCJob3Jpem9udGFsXCIsYWN0aXZlQ2xhc3NOYW1lOlwiY2Fyb3VzZWwtY2VudGVyXCIsa2V5Ym9hcmROYXY6ZmFsc2Usa2V5Ym9hcmROYXZPdmVycmlkZTp0cnVlLGltYWdlTmF2OnRydWUscHJlbG9hZEltYWdlczp0cnVlLGZvcmNlZEltYWdlV2lkdGg6MCxmb3JjZWRJbWFnZUhlaWdodDowLG1vdmluZ1RvQ2VudGVyOmEubm9vcCxtb3ZlZFRvQ2VudGVyOmEubm9vcCxjbGlja2VkQ2VudGVyOmEubm9vcCxtb3ZpbmdGcm9tQ2VudGVyOmEubm9vcCxtb3ZlZEZyb21DZW50ZXI6YS5ub29wfX0pKGpRdWVyeSk7Il0sImZpbGUiOiJqcXVlcnkud2F0ZXJ3aGVlbENhcm91c2VsLm1pbi5qcyJ9
