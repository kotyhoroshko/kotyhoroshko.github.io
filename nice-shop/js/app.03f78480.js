(function(){"use strict";var e={9569:function(e,s,i){var t=i(9242),n=i(2483),d=i(3396);function r(e,s,i,t,n,r){const a=(0,d.up)("router-view");return(0,d.wg)(),(0,d.j4)(a)}i(7658);var a={emits:["add-new-design"],data(){return{designsBase:[]}},provide(){return{designsBase:this.designsBase}},methods:{addNewDesign(e){this.designsBase.push(e)}}},l=i(89);const o=(0,l.Z)(a,[["render",r]]);var g=o,c=i(5568);const u={class:"btn"};function p(e,s){return(0,d.wg)(),(0,d.iD)("button",u,[(0,d.WI)(e.$slots,"default",{},void 0,!0)])}const h={},m=(0,l.Z)(h,[["render",p],["__scopeId","data-v-09b75d94"]]);var v=m;const f={class:"wrapper"};function I(e,s,i,t,n,r){return(0,d.wg)(),(0,d.iD)("div",f,[(0,d.WI)(e.$slots,"default",{},void 0,!0)])}var _={props:{background:{type:String}}};const w=(0,l.Z)(_,[["render",I],["__scopeId","data-v-3cee15b2"]]);var b=w,k=i(7139);const M=e=>((0,d.dD)("data-v-2a445899"),e=e(),(0,d.Cn)(),e),C={class:"inputs-container"},y=M((()=>(0,d._)("label",{class:"design-form__published-switcher",for:"published"},null,-1))),D={class:"design-form__uploaded-preview-list"},A=["src","alt","title"],B=["onClick"],O={key:0,class:"design-form__uploaded-file-list"},j={class:"uploaded-file__name"},x=["onClick"],F=M((()=>(0,d._)("label",{for:"previewImgs",class:"design-form__file-input"},[(0,d.Uk)(" Перетягніть файл або "),(0,d._)("span",null,"виберіть на диску")],-1))),U={class:"btns-container"};function z(e,s,i,n,r,a){const l=(0,d.up)("base-btn"),o=(0,d.up)("base-wrapper"),g=(0,d.Q2)("clipboard");return(0,d.wg)(),(0,d.j4)(o,{class:(0,k.C_)("wrapper--edit")},{default:(0,d.w5)((()=>[(0,d._)("button",{class:"back-btn",onClick:s[0]||(s[0]=s=>e.$router.push("/show"))}),(0,d._)("form",{action:"#",class:"design-form",onDragover:s[9]||(s[9]=(0,t.iM)(((...e)=>a.dragover&&a.dragover(...e)),["prevent"])),onDragleave:s[10]||(s[10]=(...e)=>a.dragleave&&a.dragleave(...e)),onDrop:s[11]||(s[11]=(0,t.iM)(((...e)=>a.drop&&a.drop(...e)),["prevent"]))},[(0,d._)("div",C,[(0,d.wy)((0,d._)("input",{type:"checkbox",class:"design-form__published",id:"published","onUpdate:modelValue":s[1]||(s[1]=e=>r.designItem.published=e)},null,512),[[t.e8,r.designItem.published,void 0,{trim:!0}]]),y,(0,d._)("span",{class:(0,k.C_)(["design-form__published-desc",{"design-form__published-desc--green":r.designItem.published}])},(0,k.zw)(a.isPublished),3),(0,d._)("ul",D,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(r.designItem.previewImgs,((e,s)=>((0,d.wg)(),(0,d.iD)("li",{class:"preview",key:e.src},[(0,d._)("img",{class:"preview__img",src:e.src,alt:"Design preview file#"+s,title:e.name},null,8,A),(0,d._)("button",{class:"del-btn del-btn--hover",type:"button",title:"Видалити файл",onClick:s=>a.removePic(r.designItem.previewImgs.indexOf(e))},null,8,B)])))),128)),(0,d._)("label",{for:"previewImgs",class:(0,k.C_)(["design-form__drag-drop-area",{"design-form__drag-drop-area--filled":r.designItem.previewImgs.length>0,invalid:r.validationMsgs.previewImgs.isMsgActive}])},null,2)]),(0,d._)("input",{class:"design-form__input",type:"file",id:"previewImgs",accept:"image/*",multiple:"",onChange:s[2]||(s[2]=(...e)=>a.onChange&&a.onChange(...e))},null,32),(0,d._)("span",{class:(0,k.C_)(["warn-msg",{"warn-msg--active":r.validationMsgs.previewImgs.isMsgActive}])},(0,k.zw)(r.validationMsgs.previewImgs.msg),3),(0,d.wy)((0,d._)("input",{type:"text",class:(0,k.C_)(["design-form__id",{invalid:r.validationMsgs.id.isMsgActive}]),placeholder:"###",id:"id",required:"","onUpdate:modelValue":s[3]||(s[3]=e=>r.designItem.id=e),onChange:s[4]||(s[4]=e=>a.checkInput("id"))},null,34),[[t.nr,r.designItem.id,void 0,{trim:!0}]]),(0,d.wy)((0,d._)("input",{type:"text",class:(0,k.C_)(["design-form__title",{invalid:r.validationMsgs.title.isMsgActive}]),id:"title",placeholder:"Назва дизайну",required:"","onUpdate:modelValue":s[5]||(s[5]=e=>r.designItem.title=e),onChange:s[6]||(s[6]=e=>a.checkInput("title"))},null,34),[[t.nr,r.designItem.title,void 0,{trim:!0}]]),(0,d._)("span",{class:(0,k.C_)(["warn-msg warn-msg--half",{"warn-msg--active":r.validationMsgs.id.isMsgActive}])},(0,k.zw)(a.idInvalidMsg),3),(0,d._)("span",{class:(0,k.C_)(["warn-msg warn-msg--half",{"warn-msg--active":r.validationMsgs.title.isMsgActive}])},(0,k.zw)(r.validationMsgs.title.msg),3),(0,d.wy)((0,d._)("input",{type:"url",class:(0,k.C_)(["design-form__link",{invalid:r.validationMsgs.link.isMsgActive}]),id:"link",placeholder:"https://design###.horoshop.ua/",required:"","onUpdate:modelValue":s[7]||(s[7]=e=>r.designItem.link=e),onChange:s[8]||(s[8]=e=>a.checkInput("link"))},null,34),[[t.nr,r.designItem.link,void 0,{trim:!0}]]),(0,d._)("span",{class:(0,k.C_)(["warn-msg",{"warn-msg--active":r.validationMsgs.link.isMsgActive}])},(0,k.zw)(r.validationMsgs.link.msg),3),r.designItem.previewImgs.length?((0,d.wg)(),(0,d.iD)("ul",O,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(r.designItem.previewImgs,((e,s)=>((0,d.wg)(),(0,d.iD)("li",{class:"uploaded-file",key:e+s},[(0,d.wy)(((0,d.wg)(),(0,d.iD)("span",j,[(0,d.Uk)((0,k.zw)(e.name),1)])),[[g,e.name]]),(0,d._)("button",{class:"del-btn",type:"button",title:"Видалити файл",onClick:s=>a.removePic(r.designItem.previewImgs.indexOf(e))},null,8,x)])))),128))])):(0,d.kq)("",!0),F]),(0,d._)("div",U,[(0,d.Wm)(l,{type:"button",class:(0,k.C_)("btn--del"),onClick:(0,t.iM)(a.removeDesignItem,["prevent"]),disabled:this.isAddingMode},{default:(0,d.w5)((()=>[(0,d.Uk)("Видалити")])),_:1},8,["onClick","disabled"]),(0,d.Wm)(l,{type:"submit",onClick:a.save,disabled:!a.readyForSubmit},{default:(0,d.w5)((()=>[(0,d.Uk)("Зберегти і вийти")])),_:1},8,["onClick","disabled"])])],32)])),_:1})}var L={inject:["designsBase"],data(){return{designItem:{previewImgs:[],title:"",link:"",id:"",published:!1},validationMsgs:{previewImgs:{msg:"Додайте прев'ю макету дизайну.",isMsgActive:!1},title:{msg:"Введіть назву дизайну.",isMsgActive:!1},link:{msg:"Введіть посилання на дизайн.",isMsgActive:!1},id:{msg:"Введіть ID-номер дизайну.",isMsgActive:!1}},idIsFree:!1,isAddingMode:!0,currentDesignIndex:null,designId:null}},methods:{onChange(e){for(let s=0;s<e.target.files.length;s++){let i={src:"",name:""};i.src=URL.createObjectURL(e.target.files[s]),i.name=e.target.files[s].name,this.designItem.previewImgs.push(i)}this.checkInput("previewImgs")},dragover(e){e.currentTarget.classList.add("design-form--green")},dragleave(e){e.currentTarget.classList.remove("design-form--green")},drop(e){for(let s=0;s<e.dataTransfer.files.length;s++){let i={src:"",name:""};i.src=URL.createObjectURL(e.dataTransfer.files[s]),i.name=e.dataTransfer.files[s].name,this.designItem.previewImgs.push(i)}this.checkInput("previewImgs"),e.currentTarget.classList.remove("design-form--green")},checkInput(e){0==this.designItem[e].length?this.validationMsgs[e].isMsgActive=!0:(this.validationMsgs[e].isMsgActive=!1,"id"==e&&this.checkId())},checkId(){this.designId==this.designItem.id?(this.idIsFree=!0,this.linkAutoFill()):this.designsBase.find((e=>e.id==this.designItem.id))?(this.idIsFree=!1,this.validationMsgs.id.isMsgActive=!0):(this.idIsFree=!0,this.linkAutoFill())},linkAutoFill(){this.designItem.link=`https://design${this.designItem.id}.horoshop.ua/`},save(){this.isAddingMode?this.designsBase.push(this.designItem):this.designsBase[this.currentDesignIndex]={...this.designItem},this.$router.push("/show")},removePic(e){this.designItem.previewImgs.splice(e,1),this.checkInput("previewImgs")},removeDesignItem(){this.designsBase.splice(this.currentDesignIndex,1),this.$router.push("/show")}},computed:{isPublished(){return this.designItem.published?"Oпублікований":"Неопублікований"},idInvalidMsg(){return this.idIsFree||""==this.designItem.id?"Введіть ID-номер дизайну.":"Введений ID-номер вже у вжитку."},readyForSubmit(){return!!this.idIsFree&&(this.designItem.previewImgs.length>0&&this.designItem.title.length>0&&this.designItem.link.length>0&&this.designItem.id.length>0)}},created(){if(this.designId=this.$route.params.designId,this.isAddingMode=!this.designId,this.designId)for(let e=0;e<this.designsBase.length;e++)this.designId==this.designsBase[e].id&&(this.designItem={...this.designsBase[e]},this.designItem.previewImgs=[...this.designsBase[e].previewImgs],this.currentDesignIndex=e);this.checkId()}};const T=(0,l.Z)(L,[["render",z],["__scopeId","data-v-2a445899"]]);var $=T;const P=e=>((0,d.dD)("data-v-5ffc7c96"),e=e(),(0,d.Cn)(),e),W={class:"header"},Z=P((()=>(0,d._)("p",{class:"title"},"Всі дизайни",-1))),q=["data-id"],R=["src","alt"],V={class:"design__desc"},H={class:"design__id"},K={class:"design__title"},S={key:0,class:"msg"};function Y(e,s,i,t,n,r){const a=(0,d.up)("base-btn"),l=(0,d.up)("router-link"),o=(0,d.up)("base-wrapper");return(0,d.wg)(),(0,d.j4)(o,{class:(0,k.C_)("wrapper--dark")},{default:(0,d.w5)((()=>[(0,d._)("header",W,[Z,(0,d.Wm)(l,{to:"/add"},{default:(0,d.w5)((()=>[(0,d.Wm)(a,null,{default:(0,d.w5)((()=>[(0,d.Uk)("Додати дизайн")])),_:1})])),_:1})]),(0,d._)("ul",{class:"designs-list",onClick:s[0]||(s[0]=(...e)=>r.editDesign&&r.editDesign(...e))},[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(r.designsBase,(e=>((0,d.wg)(),(0,d.iD)("li",{key:e.id,"data-id":e.id,class:"design"},[(0,d._)("img",{class:"design__img",src:e.previewImgs[0].src,alt:e.title+" preview"},null,8,R),(0,d._)("div",V,[(0,d._)("p",H,(0,k.zw)(e.id),1),(0,d._)("p",K,(0,k.zw)(e.title),1)])],8,q)))),128))]),0==r.designsBase.length?((0,d.wg)(),(0,d.iD)("p",S," Поки не завантажено жодного дизайну ")):(0,d.kq)("",!0)])),_:1})}var E={inject:["designsBase"],data(){return{}},methods:{editDesign(e){if(!e.target.classList.contains("designs-list")){let s=e.target.closest(".design").dataset.id;this.$router.push("/add/"+s)}}},created(){this.designsBase=this.designsBase.sort((function(e,s){return e.id-s.id||e.id.localeCompare(s.id)}))}};const N=(0,l.Z)(E,[["render",Y],["__scopeId","data-v-5ffc7c96"]]);var Q=N;const G=(0,n.p7)({history:(0,n.r5)(),routes:[{path:"/show",component:Q,alias:"/"},{path:"/add",component:$},{path:"/add/:designId",component:$,props:!0},{path:"/:notFound(.*)",redirect:"/show"}]}),J=(0,t.ri)(g);J.component("base-btn",v),J.component("base-wrapper",b),J.use(G),J.use(c.Z),J.mount("#app")}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var d=s[t]={exports:{}};return e[t](d,d.exports,i),d.exports}i.m=e,function(){var e=[];i.O=function(s,t,n,d){if(!t){var r=1/0;for(g=0;g<e.length;g++){t=e[g][0],n=e[g][1],d=e[g][2];for(var a=!0,l=0;l<t.length;l++)(!1&d||r>=d)&&Object.keys(i.O).every((function(e){return i.O[e](t[l])}))?t.splice(l--,1):(a=!1,d<r&&(r=d));if(a){e.splice(g--,1);var o=n();void 0!==o&&(s=o)}}return s}d=d||0;for(var g=e.length;g>0&&e[g-1][2]>d;g--)e[g]=e[g-1];e[g]=[t,n,d]}}(),function(){i.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(s,{a:s}),s}}(),function(){i.d=function(e,s){for(var t in s)i.o(s,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};i.O.j=function(s){return 0===e[s]};var s=function(s,t){var n,d,r=t[0],a=t[1],l=t[2],o=0;if(r.some((function(s){return 0!==e[s]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var g=l(i)}for(s&&s(t);o<r.length;o++)d=r[o],i.o(e,d)&&e[d]&&e[d][0](),e[d]=0;return i.O(g)},t=self["webpackChunknice_shop"]=self["webpackChunknice_shop"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=i.O(void 0,[998],(function(){return i(9569)}));t=i.O(t)})();
//# sourceMappingURL=app.03f78480.js.map